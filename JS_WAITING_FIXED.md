# üéâ JS –û–ñ–ò–î–ê–ù–ò–ï –ü–ê–†–°–ò–ù–ì–ê –ò–°–ü–†–ê–í–õ–ï–ù–û!

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. ‚úÖ JS-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å –∂–¥–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** JS –∑–∞–≤–µ—Ä—à–∞–ª—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `waitForCompletion()` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (`parsingStarted`)
- –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –¥–æ 10 –º–∏–Ω—É—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

### 2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å Selenium WebDriver
**–ü—Ä–æ–±–ª–µ–º–∞:** WebDriver —Ç–µ—Ä—è–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (`HTTPConnectionPool`, `Failed to establish`)
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —É–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ Chrome
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –í `js_parser/js/backend-client.js`:

#### 1. **–£–ª—É—á—à–µ–Ω waitForCompletion():**
```javascript
async waitForCompletion() {
    const maxWaitTime = 600000; // 10 –º–∏–Ω—É—Ç
    let parsingStarted = false;
    
    while (Date.now() - startTime < maxWaitTime) {
        const status = await this.checkStatus();
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –Ω–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
        if (status.is_parsing && !parsingStarted) {
            parsingStarted = true;
            this.log('üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –Ω–∞—á–∞–ª—Å—è', 'info', `–î–µ–ª–æ: ${status.current_case}`);
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
        if (parsingStarted && !status.is_parsing) {
            this.log('‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω –Ω–∞ backend', 'success', status.progress);
            const files = await this.getFilesList();
            return { success: status.files_count > 0, files: files, message: status.progress };
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
        if (parsingStarted && lastStatus?.progress !== status.progress) {
            this.log('üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞', 'info', status.progress);
        }
        
        await this.delay(3000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
    }
}
```

#### 2. **–£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:**
```javascript
startStatusMonitoring() {
    // –ù–µ –∑–∞–ø—É—Å–∫–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, —Ç–∞–∫ –∫–∞–∫ waitForCompletion() —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å
    // –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
}
```

### –í `backend/parser_simplified.py`:

#### 1. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Chrome:**
```python
# –£–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
options.add_argument('--disable-web-security')
options.add_argument('--disable-features=VizDisplayCompositor')
options.add_argument('--disable-ipc-flooding-protection')
options.add_argument('--disable-renderer-backgrounding')
options.add_argument('--disable-backgrounding-occluded-windows')
options.add_argument('--disable-client-side-phishing-detection')
options.add_argument('--disable-sync')
options.add_argument('--disable-translate')
options.add_argument('--disable-background-timer-throttling')

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
options.add_argument('--timeout=30000')
options.add_argument('--page-load-strategy=normal')
```

#### 2. **–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```python
def search_case(self, case_number):
    max_retries = 3
    retry_count = 0
    
    while retry_count < max_retries:
        try:
            # ... –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ ...
            
        except Exception as e:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—à–∏–±–∫–∏ WebDriver
            if "HTTPConnectionPool" in str(e) or "Failed to establish" in str(e):
                logger.warning("üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ WebDriver, –ø—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è...")
                
                # –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
                if self.driver:
                    self.driver.quit()
                self.driver = None
                
                if self.init_driver():
                    retry_count += 1
                    continue
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ JS-—Å—Ç—Ä–∞–Ω–∏—Ü—ã:

### ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
```
29.09.2025, 17:56:43
üöÄ –ù–ê–ß–ê–õ–û –ü–ê–†–°–ò–ù–ì–ê –ß–ï–†–ï–ó BACKEND
- –ù–æ–º–µ—Ä –¥–µ–ª–∞: –ê84-4753/2024
29.09.2025, 17:56:43
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ backend...
29.09.2025, 17:56:43
‚úÖ Backend –¥–æ—Å—Ç—É–ø–µ–Ω
- –°—Ç–∞—Ç—É—Å: healthy
29.09.2025, 17:56:43
üì° –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ backend...
29.09.2025, 17:56:43
‚úÖ –ó–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç backend
- –ó–∞–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å –ø–∞—Ä—Å–∏–Ω–≥–∞
29.09.2025, 17:56:43
üìä –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞—Ç—É—Å–∞...
29.09.2025, 17:56:45
‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞...
29.09.2025, 17:56:48
‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞...
29.09.2025, 17:56:51
üîÑ –ü–∞—Ä—Å–∏–Ω–≥ –Ω–∞—á–∞–ª—Å—è
- –î–µ–ª–æ: –ê84-4753/2024
29.09.2025, 17:56:54
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
- [17:56:54] –ü–æ–∏—Å–∫ –¥–µ–ª–∞ –≤ –±–∞–∑–µ kad.arbitr.ru
29.09.2025, 17:57:00
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
- [17:57:00] –ù–∞–π–¥–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
29.09.2025, 17:58:30
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω –Ω–∞ backend
- –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω. –°–∫–∞—á–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 3
29.09.2025, 17:58:30
üìÅ –ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 3
29.09.2025, 17:58:30
‚úÖ –ü–ê–†–°–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù
- –°–∫–∞—á–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 3
29.09.2025, 17:58:30
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ **JS-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å:**
1. **–ñ–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞** - –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
2. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø
3. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏** - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å WebDriver
4. **–õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—á–∞–ª–æ, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

### ‚úÖ **WebDriver —Å—Ç–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ:**
1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
3. **–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
4. **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤**

### üîÑ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. JS –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥
2. JS –∂–¥–µ—Ç –Ω–∞—á–∞–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (`is_parsing = true`)
3. JS –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
4. JS –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (`is_parsing = false`)
5. JS –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

---

**üéâ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!**  
JS-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∂–¥–µ—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å!
