# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Telegram –±–æ—Ç–∞

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–æ–µ–∫—Ç:** Telegram –±–æ—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ kad.arbitr.ru
**Python –≤–µ—Ä—Å–∏—è:** 3.13.7
**–û–°:** Windows 10/11
**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 14 –Ω–æ—è–±—Ä—è 2025 –≥.
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**–ü—Ä–æ–±–ª–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞!** –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —á–∏—Å—Ç–æ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ `venv_clean`. –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É.

## üìä –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞

```
TypeError: ForwardRef._evaluate() missing 1 required keyword-only argument: 'recursive_guard'
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å pydantic-core v2.14.6 —Å Python 3.13. –í Python 3.13 –∏–∑–º–µ–Ω–∏–ª—Å—è API –¥–ª—è `typing.ForwardRef._evaluate()`.

### –ö–æ—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Python 3.13**
   - pydantic-core v2.14.6 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π API Python 3.13
   - Python 3.13 –≤—ã—à–µ–ª –≤ –æ–∫—Ç—è–±—Ä–µ 2024, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞–∫–µ—Ç—ã –µ—â–µ –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º**
   - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤
   - –ö—ç—à pip —Å–æ–¥–µ—Ä–∂–∞–ª —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ wheel-—Ñ–∞–π–ª—ã

3. **–°—Ç—Ä–æ–≥–∏–µ –≤–µ—Ä—Å–∏–∏ –≤ requirements.txt**
   - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

1. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ pip:**
   ```bash
   python -m pip cache purge
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Å—Ç–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   python -m venv venv_clean
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ requirements.txt —Å –≥–∏–±–∫–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:**
   ```txt
   # –í–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–≥–∏—Ö –≤–µ—Ä—Å–∏–π (>=)
   pydantic>=2.10.0
   aiogram>=3.4.0
   # –∏ —Ç.–¥.
   ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```bash
   .\install_clean.bat
   ```

### –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```
Successfully installed:
- pydantic-2.11.10
- pydantic-core-2.33.2 (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å Python 3.13)
- aiogram-3.22.0
- aiohttp-3.12.15
- –ò –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üìã –§–∞–π–ª—ã —Ä–µ—à–µ–Ω–∏—è

### install_clean.bat
```batch
@echo off
echo Installing dependencies in clean virtual environment...

call venv_clean\Scripts\activate.bat
python -m pip install --upgrade pip setuptools wheel
pip install -r requirements.txt

echo Dependencies installed successfully!
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π requirements.txt
```txt
# Telegram bot dependencies - simplified for Python 3.13
aiogram>=3.4.0
httpx>=0.27.0
pydantic>=2.10.0
pydantic-settings>=2.6.0
python-dotenv>=1.0.0
loguru>=0.7.0
aiolimiter>=1.1.0
tenacity>=8.5.0
ujson>=5.10.0
selenium>=4.15.0
webdriver-manager>=4.0.0
beautifulsoup4>=4.12.0
undetected-chromedriver>=3.5.0
setuptools>=65.0.0
```

## üéØ –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ß—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ

1. **–ì–∏–±–∫–∏–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–≥–∏—Ö
2. **–ß–∏—Å—Ç–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
3. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ pip**
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤**

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Python 3.13 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   - –ú–Ω–æ–≥–∏–µ –ø–∞–∫–µ—Ç—ã –µ—â–µ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Python 3.13
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python 3.11 –∏–ª–∏ 3.12 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

2. **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —á–∏—Å—Ç—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –∫—ç—à pip

3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–∏–±–∫–∏–µ –≤–µ—Ä—Å–∏–∏ (>=) –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–≥–∏—Ö (==)
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–∞–∫–µ—Ç–æ–≤ —Å –≤–∞—à–µ–π –≤–µ—Ä—Å–∏–µ–π Python

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
venv_clean\Scripts\activate

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python src/bot.py
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Python 3.11 –¥–ª—è –±–æ–ª—å—à–µ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

---

## üöÄ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (15 –Ω–æ—è–±—Ä—è 2025)

### ‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ImportError: attempted relative import with no known parent package
```

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã (`from .config import settings`) —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –º–æ–¥—É–ª—è –∫–∞–∫ –ø–∞–∫–µ—Ç–∞ (`python -m src.bot`), –Ω–æ –Ω–µ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ —Ñ–∞–π–ª–∞ (`python src/bot.py`).

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ:**
   ```python
   # –ë—ã–ª–æ:
   from .config import settings, state
   from .keyboards import main_menu_kb

   # –°—Ç–∞–ª–æ:
   from config import settings, state
   from keyboards import main_menu_kb
   ```

   **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
   - `src/bot.py` (4 –∏–º–ø–æ—Ä—Ç–∞)
   - `src/queue_manager.py` (2 –∏–º–ø–æ—Ä—Ç–∞)
   - `src/rate_limiter.py` (1 –∏–º–ø–æ—Ä—Ç)
   - `src/backend_client.py` (1 –∏–º–ø–æ—Ä—Ç)

2. **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ `run_bot.py`:**
   ```python
   #!/usr/bin/env python3
   import sys, os, subprocess

   src_path = os.path.join(os.path.dirname(__file__), 'src')
   sys.path.insert(0, src_path)

   if __name__ == "__main__":
       bot_file = os.path.join(src_path, 'bot.py')
       subprocess.run([sys.executable, bot_file])
   ```

3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞:**
   ```bash
   cd src && python bot.py
   ```

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞:**
```bash
python run_bot.py  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
cd src && python bot.py  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
|----------|--------|------------|
| –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å pydantic-core —Å Python 3.13 | ‚úÖ –†–µ—à–µ–Ω–∞ | 14 –Ω–æ—è–±—Ä—è |
| –û—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ aiohttp | ‚úÖ –†–µ—à–µ–Ω–∞ | 14 –Ω–æ—è–±—Ä—è |
| –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Cython/Rust | ‚úÖ –†–µ—à–µ–Ω–∞ | 14 –Ω–æ—è–±—Ä—è |
| –û—à–∏–±–∫–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ | ‚úÖ –†–µ—à–µ–Ω–∞ | 15 –Ω–æ—è–±—Ä—è |

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±
python run_bot.py

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
cd src && python bot.py
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python 3.11 –∏–ª–∏ 3.12 –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —á–∏—Å—Ç—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ pip –∫—ç—à: `pip cache purge`

**üöÄ –ë–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.**
